<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Mirrors are servers that replicate a Linux distributions repositories. Arch Linux has many mirrors situated around the globe. We show you two ways to select which mirrors your Arch Linux computer uses."><meta name=generator content="Hugo 0.98.0"><meta name=robots content="index,follow,noarchive"><title>Avoid Pacman Headaches on Arch Linux by Automating Mirror List Updates &#183;</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/blackburn.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel=stylesheet type=text/css><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><link rel="shortcut icon" href=./img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=./index.html>VlogBee</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=./index.html><i class="fa fa-home fa-fw"></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=./post/index.html><i class="fa fa-list fa-fw"></i>Posts</a></li><li class=pure-menu-item><a class=pure-menu-link href=./sitemap.xml><i class="fa fa-user fa-fw"></i>Sitemap</a></li><li class=pure-menu-item><a class=pure-menu-link href=./index.xml><i class="fa fa-phone fa-fw"></i>RSS</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list></ul></div><div><div class=small-print><small>&copy; 2022. All rights reserved.</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>Avoid Pacman Headaches on Arch Linux by Automating Mirror List Updates</h1><h2>Mirrors are servers that replicate a Linux distributions repositories. Arch Linux has many mirrors situated around the globe. We show you two ways to select which mirrors your Arch Linux computer uses.</h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i>
<time>29 Sep 2024, 00:00</time></div></div><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>Why Mirrors Matter</a></li></ul><ul class=table-content-level-1><li><a href=#>Updating the Arch Mirror List Manually</a></li></ul><ul class=table-content-level-1><li><a href=#>What Is Reflector, and What Does It Do?</a></li></ul><ul class=table-content-level-1><li><a href=#>Installing Reflector on Arch Linux</a></li></ul><ul class=table-content-level-1><li><a href=#>Using Reflector on the Command Line</a></li></ul><ul class=table-content-level-1><li><a href=#>Using the Reflector Service</a></li></ul><ul class=table-content-level-1><li><a href=#>Use the Timer and Update When You Want</a></li></ul><h3 class="title icon i-list">Key Takeaways</h3><ul><li>Mirrors are servers that hold software packages in Linux repositories. Keeping your mirror list up-to-date is crucial for application installations and system updates.</li><li>Updating the Arch mirror list manually involves generating a list of mirrors in your region, pasting it into a file, and saving it for pacman to use.</li><li>Reflector is a utility that generates mirror lists and updates the mirrorlist file. It can be used on the command line or as a service with customizable options.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Mirrors are servers that replicate a Linux distribution’s repositories. Arch Linux has many mirrors situated around the globe. We show you two ways to select which mirrors your Arch Linux computer uses.</p><h2 id=why-mirrors-matter>Why Mirrors Matter</h2><p>All the software packages available to users of a Linux distribution are held in repositories. Repositories are simply internet-accessible servers. When you install an application, your package manager has to connect to a repository so that it can retrieve the installation files.</p><p>Like all cloud-based resources, repositories face challenges with bandwidth and availability. Too many connections and network traffic and the server can become bogged down and sluggish. Hardware failures or scheduled maintenance can take a repository offline.</p><p>Distributions use a network of copycat repositories located around the world. These allow faster connections to users by providing repositories in their regions, instead of forcing everyone to connect to the main repository.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>It’s important to make sure the list of mirrors your computer uses is up-to-date because application installations and <a href=#>system updates</a> depend on them.</p><h2 id=updating-the-arch-mirror-list-manually>Updating the Arch Mirror List Manually</h2><p>By default, Arch doesn’t automatically update the mirrors list. It creates a mirror list at install time, but unless you take action yourself, that list is never changed.</p><p>Updating the list manually works, but it’s not convenient. Automating the process is the best solution. But you can, if you want, update your mirror list by hand.</p><p>The place to start is the Arch Linux <a href=# rel="noopener noreferrer">Pacman Mirrorlist Generator</a>. Our objective is to get a list of the mirrors in your region and some from other regions for redundancy.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/2.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>I’m selecting "United Kingdom" from the scrolling list and "HTTPS" and "IPV4" from the checkboxes. I’ve selected the "Use Mirror Status" checkbox, so only active mirrors are included in the results.</p><p>To see the results, click the "Generate List" button.</p><p>The matching mirrors are listed. Copy this text and paste it into your editor. Note that all lines start with a hash character "#", meaning they are treated as comments. To activate a mirror, remove the hash from the start of its line.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/3.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You can repeat this process for other regions, pasting the results to your editor each time. I also selected mirrors in Germany and Sweden. That way, should the UK mirrors be down or inaccessible, pacman will try to use the mirrors from Sweden and Germany.</p><p>pacman reads its mirrors from a file called "/etc/pacman.d/mirrorlist." You need to edit that file and replace its contents with the new list.</p><pre><code class=hljs>sudo gedit /etc/pacman.d/mirrorlist</code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/4.png><p>Replace “gedit” with your favorite editor. Copy and paste the list you’ve just created into the mirrorlist file, replacing the original contents. Save the file and close your editor.</p><p>pacman will now use our new list.</p><h2 id=what-is-reflector-and-what-does-it-do>What Is Reflector, and What Does It Do?</h2><p>Reflector is a utility for generating mirror lists, and optionally updating the mirrorlist file. You can use it on the command line, or as a service.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You can pass parameters to it to choose the regions you want to use mirrors from, and you can have the results ranked by, say, download speed.</p><p>In Arch Linux, Reflector isn’t installed by default, but in other Arch-based distributions, it might be.</p><h2 id=installing-reflector-on-arch-linux>Installing Reflector on Arch Linux</h2><p>Installing Reflector is simple, as long as you have a working mirror list. If you don’t, pacman won’t work. If that’s the case, you’ll have to go through the steps above to manually create a working mirror list.</p><p>The pacman command is:</p><pre><code class=hljs>sudo pacman -S reflector</code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/6.png><h2 id=using-reflector-on-the-command-line>Using Reflector on the Command Line</h2><p>Using Reflector on the command line can overwrite your existing mirror list, so if you want to preserve your existing mirror list as a backup, make a copy of it before you start.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre><code class=hljs>sudo cp /etc/pacman.d/mirrorlist /etc/pacman.d/old-mirrorlist</code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/7.png><p>This example doesn’t overwrite your mirror list.</p><pre><code class="hljs sql">reflector <span class=hljs-comment>--verbose --ipv4 --protocol https --score 10 --sort rate</span></code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/8.png><p>The options we used were:</p><ul><li><strong>verbose</strong>: Give a more detailed output, where possible.</li><li><strong>ipv4</strong>: Select mirrors that support the IPv4 protocol.</li><li><strong>protocol</strong>: Select mirrors that support the specified protocol, such as HTTP, HTTPS, or FTP.</li><li><strong>score</strong>: Select a number of mirrors that <a href=# rel="noopener noreferrer">have the best scores</a>. Each mirror gets a score, with lower scores being better than higher scores. This is calculated from connection delay times, average connection duration, and the percentage of successfully completed test connections. Note that the “10” in the command line refers to how many best-scored mirrors we want returned. It doesn’t refer to the score itself.</li><li><strong>sort</strong>: Sorts the results. We have opted to sort by download rate. pacman tries the mirrors in the mirror list from top to bottom, until it finds one that is working, so it makes sense to have the fastest mirror first in the list.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Reflector supports a lot of command-line options. You won’t find them on Reflector’s man page though, you need to use its help option:</p><pre><code class="hljs sql">reflector <span class=hljs-comment>--help</span></code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/9.png><p>As we've seen, omitting the --save option lets you dry-run Reflector commands without putting your existing mirror list at risk. Let's include the --save option so that we update our mirrorlist file. You need to use sudo when using this option.</p><pre><code class="hljs sql">sudo reflector <span class=hljs-comment>--verbose --country DE,SE,GB --protocol https --sort rate --latest 20 --download-timeout 6 --save /etc/pacman.d/mirrorlist</span></code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/10.png><p>Our new options are:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><ul><li><strong>country</strong>: Select the regions we wish to include mirrors from. You can use country codes or country names.</li><li><strong>latest</strong>: We want to use the 20 most recently updated mirrors.</li><li><strong>download-timeout</strong>: Sets the duration in seconds before Reflector considers a repository offline.</li><li><strong>save</strong>: The file the results should be written to. The default location on Arch is "/etc/pacman.d/mirrorlist."</li></ul><p>You can view your mirror list using the cat or less commands.</p><pre><code class=hljs>less /etc/pacman.d/mirrorlist</code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/11.png><p>Reflector writes a timestamped header, so you can see when the last update happened.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/12.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=using-the-reflector-service>Using the Reflector Service</h2><p>Reflector provides a service and a timer. If you enable and start the reflector.service, it’ll update your mirror list whenever you boot your computer. The downside is slower boot times.</p><p>A better solution is to enable and start the reflector.timer instead. It’ll run the reflector.service once a week for you.</p><pre>sudo systemctl enable reflector.timer  <p>sudo systemctl start reflector.timer</p></pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/13.png><p>To edit the Reflector configuration file, use your favorite editor in this command:</p><pre><code class=hljs>sudo gedit /etc/xdg/reflector/reflector.conf</code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/14.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You can see that the command-line options are listed on separate lines.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/15.png><p>You can change their values or add in the ones you want to use.</p><p>To edit the configuration file for the timer, use:</p><pre><code class=hljs>sudo gedit /usr/lib/systemd/system/reflector.timer</code> </pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2024/02/16.png><p>We've described <a href=#>how to configure timers in-depth</a> in another article.</p><h2 id=use-the-timer-and-update-when-you-want>Use the Timer and Update When You Want</h2><p>You can manually update your mirror list at any time by running Reflector on the command line. If you turn the command into an alias or a Bash shell function, you won’t need to remember all the parameters.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGiYrqyfoq61tc2gZKahoqe8s3nLoqqtZaWlsaLAxKxkqKZdlr%2BktIyloKetqGQ%3D</p><h4><i class="fas fa-share-alt" aria-hidden=true></i>&nbsp;Share!</h4><ul class=share-buttons><li><a href="https://www.facebook.com/sharer/sharer.php?u=%2fautomating-mirror-list-updates-on-arch-linux.html" target=_blank title="Share on Facebook"><i class="fab fa-facebook" aria-hidden=true></i><span class=sr-only>Share on Facebook</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://twitter.com/intent/tweet?source=%2fautomating-mirror-list-updates-on-arch-linux.html" target=_blank title=Tweet><i class="fab fa-twitter" aria-hidden=true></i><span class=sr-only>Tweet</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://plus.google.com/share?url=%2fautomating-mirror-list-updates-on-arch-linux.html" target=_blank title="Share on Google+"><i class="fab fa-google-plus" aria-hidden=true></i><span class=sr-only>Share on Google+</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.tumblr.com/share?v=3&u=%2fautomating-mirror-list-updates-on-arch-linux.html" target=_blank title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden=true></i><span class=sr-only>Post to Tumblr</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://pinterest.com/pin/create/button/?url=%2fautomating-mirror-list-updates-on-arch-linux.html" target=_blank title="Pin it"><i class="fab fa-pinterest-p" aria-hidden=true></i><span class=sr-only>Pin it</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.reddit.com/submit?url=%2fautomating-mirror-list-updates-on-arch-linux.html" target=_blank title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden=true></i><span class=sr-only>Submit to Reddit</span></a></li></ul><style>ul.share-buttons{list-style:none;padding:0}ul.share-buttons li{display:inline}ul.share-buttons .sr-only{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}</style><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=./debbie-frank.html><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=./debbie-frank.html>Debbie Frank, Astrologer - HELLO!</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=./frasier-john-mahoney-martin-crane-kelsey-grammer.html>why John Mahoney was much more than Frasiers dad</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=./frasier-john-mahoney-martin-crane-kelsey-grammer.html><i class="fa fa-chevron-right"></i></a></div></div></div></div></div><script src=https://assets.cdnweb.info/hugo/blackburn/js/ui.js></script>
<script src=https://assets.cdnweb.info/hugo/blackburn/js/menus.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>